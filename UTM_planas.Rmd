---
title: "UTM_Planas"
author: "JoseOro"
date: "2024-12-16"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Librerías a utilizar

```{r}

library(shiny)
library(sf)
library(geosphere)
library(dplyr)
library(DT)

```
## Ruta del archivo CSV
Cargando Datos:

```{r}
archivo <- file.choose()
datos <- read.csv(archivo, header = TRUE)
# Validar si las columnas requeridas existen
columnas_requeridas <- c("PUNTO", "NORTE", "ESTE", "h")
if (!all(columnas_requeridas %in% colnames(datos))) {
  stop("El archivo no contiene las columnas requeridas: PUNTO, NORTE, ESTE, h")
}
head(datos)
```
## Especificando parámetros de entrada (Zona y  Hemisferio)
```{r}
zona_utm <- 19    # Ejemplo: Zona UTM 19
hemisferio <- "S" # Ejemplo: Hemisferio Sur
```
# Definiendo EPSG según la Zona y Hemisferio
```{r}
    if (hemisferio == "N") {
    crs_utm <- paste0("EPSG:", 32600 + zona_utm)  # Hemisferio Norte
  } else if (hemisferio == "S") {
    crs_utm <- paste0("EPSG:", 32700 + zona_utm)  # Hemisferio Sur
  } else {
    stop("El hemisferio debe ser 'N' (Norte) o 'S' (Sur).")
  }
```
# Transformando a un objeto "sf"

```{r}
  # Convertir a un objeto 'sf'
  puntos_utm <- st_as_sf(datos, coords = c("ESTE", "NORTE"), crs = crs_utm)
```

# Transformando a WGS84 (EPSG:4326)
```{r}
puntos_wgs84 <- st_transform(puntos_utm, crs = 4326)
head(puntos_wgs84)
```
# Extrayendo Coordenadas

```{r}
coords <- st_coordinates(puntos_wgs84)
nrow(coords)
```


